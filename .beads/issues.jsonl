{"id":"QRY-05x","title":"Site Scanner: Layer 3 - Field discovery (ACF groups, meta keys)","description":"Extend site scanner with field discovery: ACF field groups and fields per post type via acf_get_field_groups() + acf_get_fields(), raw meta keys from wp_postmeta (SELECT DISTINCT with LIMIT 200, cached 1hr), Yoast SEO fields if detected. Field discovery is on-demand per post type (not full site scan at once) to handle large sites.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-26T11:58:07.178274-05:00","updated_at":"2026-02-26T12:07:52.9166281-05:00","closed_at":"2026-02-26T12:07:52.9166281-05:00","close_reason":"Complete. Layer 3 field discovery with ACF groups and meta key scanning.","dependencies":[{"issue_id":"QRY-05x","depends_on_id":"QRY-55v","type":"blocks","created_at":"2026-02-26T11:58:07.179332-05:00","created_by":"daemon"}]}
{"id":"QRY-09y","title":"Rollback / pre-import snapshot with one-click restore","description":"Before writing any changes, serialize the current state of all affected posts (core fields + ACF fields + taxonomies) into a rollback snapshot. After import, display a \"Rollback this import\" button in the import results. Combined with the existing preview/diff, this creates a complete safety net no competitor offers end-to-end. WP Ultimate CSV Importer Pro is the only competitor with rollback, and they don't have preview. Quarry would be first to offer both.","design":"1. Create class-rollback.php with QRY_Rollback\\n2. Before import: collect all post IDs that will be affected\\n3. Serialize each post's data: post fields, postmeta, term relationships\\n4. Store as a named snapshot in a custom table (qry_snapshots) or wp_options\\n5. After import: show \"Rollback\" button in results UI\\n6. Rollback action: iterate snapshot, restore each post's data\\n7. Set TTL (30 days default), auto-prune old snapshots\\n8. Show snapshot list in dashboard or import history","acceptance_criteria":"- Pre-import snapshot is created automatically for every import\\n- Rollback button appears in import results\\n- Clicking rollback restores all affected posts to their pre-import state\\n- Rollback covers: core fields, ACF fields, taxonomies\\n- Old snapshots are auto-pruned after 30 days\\n- Snapshot size is displayed so user knows storage impact","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T12:36:09.9435723-05:00","updated_at":"2026-02-26T12:36:09.9435723-05:00","labels":["safety","tier-1"]}
{"id":"QRY-0ii","title":"Multiple unique key matching (title, slug, ACF field)","description":"Currently Quarry only matches existing posts by WordPress post ID. Users migrating from external systems (CRM, PIM, spreadsheet) that use their own ID scheme can't use update mode without first exporting to get WP IDs. Add \"Match existing posts by\" dropdown: Post ID (current), Post Title, Post Slug, or Any ACF/meta field (with field name input). During import, run WP_Query or DB query to find matching post before deciding create vs update.","acceptance_criteria":"- Dropdown in import settings: \"Match by: ID / Title / Slug / Custom Field\"\\n- Custom field option shows text input for field name\\n- Matching finds correct existing post for update\\n- If no match found, creates new post\\n- If multiple matches, logs a warning and skips or uses first match\\n- Works with saved templates","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-26T12:36:46.3212474-05:00","updated_at":"2026-02-26T12:36:46.3212474-05:00","labels":["import","tier-2"],"dependencies":[{"issue_id":"QRY-0ii","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:36:46.3233505-05:00","created_by":"daemon"}]}
{"id":"QRY-323","title":"Value transformation / math formulas during import","description":"Apply transformations to field values during import. Math formulas for numeric fields ({price} * 1.1 for 10% markup), string operations (find/replace, prefix/suffix, uppercase/lowercase), and date format conversion. WebToffee offers math formulas, WP All Import offers this via inline PHP. Simpler expression evaluator approach is better UX than raw PHP.","acceptance_criteria":"- Per-field \"Transform\" option in import mapping\\n- Math expressions: +, -, *, / with column references\\n- String operations: find/replace, prepend, append, to_upper, to_lower\\n- Transformations previewed in the import preview\\n- Saved in templates","status":"open","priority":3,"issue_type":"feature","created_at":"2026-02-26T12:37:13.3964649-05:00","updated_at":"2026-02-26T12:37:13.3964649-05:00","labels":["import","tier-3"],"dependencies":[{"issue_id":"QRY-323","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:37:13.3991027-05:00","created_by":"daemon"}]}
{"id":"QRY-3tp","title":"Rebrand: Rename all identifiers from ria-data-manager to quarry","description":"Full rebrand of the codebase. Rename: plugin folder (ria-data-manager -\u003e quarry), main file (ria-data-manager.php -\u003e quarry.php), all RIA_DM_ constants to QRY_, all ria_dm_ functions to qry_, text domain to quarry, CSS/JS prefixes, upload directory, AJAX actions, nonces, menu slugs, class names (RIA_Data_Manager -\u003e Quarry, RIA_DM_Admin -\u003e QRY_Admin, etc.), GitHub updater repo reference. Support both RIA_DM_UPDATE_TOKEN and QUARRY_UPDATE_TOKEN in wp-config.php during transition.","acceptance_criteria":"Plugin activates cleanly with new name. All admin pages render. Export and import still work. GitHub updater still detects releases.","status":"closed","priority":1,"issue_type":"chore","created_at":"2026-02-26T11:57:55.6397639-05:00","updated_at":"2026-02-26T12:07:50.4271629-05:00","closed_at":"2026-02-26T12:07:50.4271629-05:00","close_reason":"Complete. All identifiers renamed from ria-data-manager to quarry across 25 files.","dependencies":[{"issue_id":"QRY-3tp","depends_on_id":"QRY-55v","type":"blocks","created_at":"2026-02-26T11:57:55.6413593-05:00","created_by":"daemon"}]}
{"id":"QRY-55v","title":"Quarry: Rebrand + Site Scanner","description":"Rebrand ria-data-manager to Quarry and add a Site Scanner dashboard that introspects the WordPress site on first install. The scanner discovers all CPTs, taxonomies, ACF fields, meta keys, and content statistics to inform export/import operations.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-26T11:57:46.8790822-05:00","updated_at":"2026-02-26T12:07:54.920376-05:00","closed_at":"2026-02-26T12:07:54.920376-05:00","close_reason":"Epic complete. Quarry v2.0.0 released with rebrand and site scanner dashboard."}
{"id":"QRY-60e","title":"Site Scanner: Layer 2 - Content statistics (counts per type/status/taxonomy)","description":"Extend site scanner with content statistics: wp_count_posts() per post type, wp_count_terms() per taxonomy, media library count. Cached alongside Layer 1 data. Provides at-a-glance content overview for the dashboard.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-26T11:58:03.4663715-05:00","updated_at":"2026-02-26T12:07:52.0958065-05:00","closed_at":"2026-02-26T12:07:52.0958065-05:00","close_reason":"Complete. Layer 2 statistics built into site scanner.","dependencies":[{"issue_id":"QRY-60e","depends_on_id":"QRY-55v","type":"blocks","created_at":"2026-02-26T11:58:03.4674261-05:00","created_by":"daemon"}]}
{"id":"QRY-7gg","title":"Conditional row filters (rule builder for import)","description":"Filter incoming CSV rows before they are written, based on column values. Visual rule builder: select column, select operator (equals, not equals, contains, greater than, less than, is empty, is not empty), enter value. Rules combined with AND logic. Rows failing any rule are skipped and logged as \"Filtered.\" Prevents garbage data in source file from creating garbage posts. WP Ultimate CSV Importer Pro and WebToffee both offer this.","acceptance_criteria":"- Optional \"Filter rules\" section in import wizard\\n- Add/remove filter rules dynamically\\n- Operators: equals, not equals, contains, greater than, less than, is empty, is not empty\\n- Filtered rows are skipped and logged\\n- Filter count shown in import results\\n- Filters saved in templates","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-26T12:37:03.2560152-05:00","updated_at":"2026-02-26T12:37:03.2560152-05:00","labels":["import","tier-2"],"dependencies":[{"issue_id":"QRY-7gg","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:37:03.2587801-05:00","created_by":"daemon"}]}
{"id":"QRY-a26","title":"Email notification on import/export completion","description":"After a scheduled or manual import completes, send email to site admin (or configured addresses) with summary: total rows, created, updated, skipped, errors. Critical for scheduled imports running unattended overnight. Uses wp_mail(). Add settings field for notification email and toggle per template.","acceptance_criteria":"- Email sent after import completion with summary stats\\n- Configurable email address (defaults to admin email)\\n- Toggle per template: send notifications yes/no\\n- Email includes: template name, timestamp, row counts, error summary\\n- Errors are listed (first 10 with row numbers)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-26T12:36:57.6032666-05:00","updated_at":"2026-02-26T12:36:57.6032666-05:00","labels":["automation","tier-2"],"dependencies":[{"issue_id":"QRY-a26","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:36:57.6053951-05:00","created_by":"daemon"}]}
{"id":"QRY-aw6","title":"Saved import/export configuration templates (profiles)","description":"Save complete import/export configurations as named templates -- field mappings, options (skip-on-error, create-taxonomies, update-existing), post type, statuses, date range. Templates stored as JSON in wp_options. UI: \"Save as Template\" button after configuring, \"Load Template\" dropdown at the top of the import/export form. Every major competitor offers this (WP All Import, WP Ultimate CSV Importer, WebToffee). Without it, users redo mapping on every run.","design":"1. Create class-templates.php with QRY_Templates class\\n2. Store templates in wp_options as qry_templates (serialized array)\\n3. Each template: name, type (import/export), post_type, settings JSON, field_mappings JSON, created_at\\n4. Add Save/Load UI to export-page.php and import-page.php\\n5. AJAX handlers: qry_save_template, qry_load_template, qry_delete_template","acceptance_criteria":"- User can save current import config as a named template\\n- User can save current export config as a named template\\n- Templates appear in a dropdown at top of the form\\n- Loading a template pre-fills all form fields\\n- User can delete templates\\n- Templates persist across sessions","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T12:35:51.0509864-05:00","updated_at":"2026-02-26T12:35:51.0509864-05:00","labels":["automation","tier-1"],"dependencies":[{"issue_id":"QRY-aw6","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:35:51.055352-05:00","created_by":"daemon"}]}
{"id":"QRY-b4u","title":"Scheduled imports from URL / Google Sheets CSV","description":"Enable scheduled, unattended imports from a remote URL (direct CSV URL, FTP path, or Google Sheets published CSV URL). Uses wp_schedule_event for cron. Each saved template can have a schedule attached (hourly, twice-daily, daily, weekly). Closes the biggest gap in the Google Sheets workflow -- users currently must manually trigger import after editing the sheet. Google Sheets publish-to-web URL format: https://docs.google.com/spreadsheets/d/{id}/export?format=csv","design":"1. Add schedule settings to template system: interval (hourly/daily/weekly), source_url, enabled toggle\\n2. Create class-scheduler.php with QRY_Scheduler\\n3. Register wp_schedule_event hooks on template save\\n4. On cron fire: fetch URL, run import using saved template config\\n5. Store run history: timestamp, rows processed, created, updated, errors\\n6. Dashboard widget showing scheduled jobs and last run status\\n7. Support Google Sheets CSV export URL format","acceptance_criteria":"- User can attach a URL source and schedule to a saved template\\n- Scheduled imports run via WP cron at the configured interval\\n- Google Sheets published CSV URL works as a source\\n- Run history stored and viewable in dashboard\\n- User can enable/disable/delete schedules\\n- Failed runs are logged with error details","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T12:36:00.7881612-05:00","updated_at":"2026-02-26T12:36:00.7881612-05:00","labels":["automation","google-sheets","tier-1"]}
{"id":"QRY-bdm","title":"Skip unchanged records (hash-based delta import)","description":"On each import run, compute a hash (md5/sha256) of each incoming row's data. Compare to stored hashes from the previous run of the same template. Skip rows whose hash matches. WP All Import introduced this in 2020 and it became their most praised optimization -- recurring imports of 10K rows where only 200 changed complete in seconds instead of minutes. Essential once scheduling lands.","design":"1. Add qry_row_hashes table or postmeta entries: post_id, template_id, data_hash\\n2. During import: compute hash of each CSV row's mapped values\\n3. Look up stored hash for the matched post + template\\n4. If identical: skip row, increment skip counter\\n5. If different or new: process row, update stored hash\\n6. Report in results: \"X rows skipped (unchanged)\"\\n7. Option to force-process-all (ignore hashes) as a checkbox","acceptance_criteria":"- Hashes stored per post per template\\n- Unchanged rows are skipped on re-import\\n- Results show count of skipped-unchanged rows\\n- Force-process-all option bypasses hash check\\n- Hash storage is cleaned up when template is deleted","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T12:36:19.268981-05:00","updated_at":"2026-02-26T12:36:19.268981-05:00","labels":["performance","tier-1"]}
{"id":"QRY-c48","title":"Dashboard: New admin tab with site overview","description":"Add a Dashboard tab as the default landing page in the admin UI. Shows: post types with counts, taxonomies with term counts, ACF field groups summary, detected integrations (ACF, Yoast, Woo), last scan timestamp, Rescan button. Tab order becomes: Dashboard | Export | Import | Settings. Clean card-based layout matching existing admin CSS.","acceptance_criteria":"Dashboard tab renders on first visit. Shows accurate post type and taxonomy data. Rescan button clears transients and refreshes. Responsive layout.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:58:11.6550659-05:00","updated_at":"2026-02-26T12:07:54.0443649-05:00","closed_at":"2026-02-26T12:07:54.0443649-05:00","close_reason":"Complete. Dashboard tab with stats grid, taxonomies, integrations, ACF groups, rescan.","dependencies":[{"issue_id":"QRY-c48","depends_on_id":"QRY-55v","type":"blocks","created_at":"2026-02-26T11:58:11.6561277-05:00","created_by":"daemon"}]}
{"id":"QRY-djr","title":"Delete records missing from import file (feed sync mode)","description":"When re-running a scheduled import, posts that were created by a previous run of the same template but are NOT present in the current file can be trashed, status-changed to draft, or permanently deleted. Enables true feed management: the CSV is the authoritative source, WordPress reflects it. WP All Import calls this \"Remove posts not present in this import file.\" Standard for product catalog management and directory sites.","design":"1. Track which post IDs were created/seen by each template (qry_template_posts table or meta)\\n2. On re-run: collect set of post IDs processed in current run\\n3. Diff against stored set from previous run\\n4. Posts in stored set but not current set are candidates\\n5. Action options: trash, set to draft, permanently delete\\n6. Expose as opt-in setting per template with clear warning\\n7. Log which posts were removed and why","acceptance_criteria":"- Option appears in template settings: \"Remove posts not in file\"\\n- Three actions: trash, draft, delete\\n- Only affects posts created by or last seen by this template\\n- Action is logged in import results\\n- Clear warning shown before enabling\\n- Manual imports (non-template) do not trigger this","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-26T12:36:28.41646-05:00","updated_at":"2026-02-26T12:36:28.41646-05:00","labels":["automation","tier-1"]}
{"id":"QRY-hly","title":"Premium Feature Development - Competitive Parity + Differentiation","description":"Add premium-grade features to Quarry based on competitive analysis of WP All Import Pro, WP Ultimate CSV Importer Pro, WebToffee Import Export Suite, WP Sheet Editor, and others. Quarry's unique advantages (import preview/diff, site scanner dashboard) should be preserved and extended. Focus areas: automation (templates, scheduling, delta sync), safety (rollback), precision (field-level control, multi-key matching), and workflow (Google Sheets integration, export customization).","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-26T12:35:36.0900702-05:00","updated_at":"2026-02-26T12:35:36.0900702-05:00"}
{"id":"QRY-lax","title":"Selective field-level update control","description":"Let users specify exactly which fields to overwrite on update runs. The import UI presents checkboxes per mapped field (title, excerpt, content, status, each ACF field). Unchecked fields are left untouched even if the CSV contains values for them. Common use case: \"Update prices and stock from this CSV but don't overwrite the post title or content the editor customized.\" WP All Import Pro's most-used advanced feature.","acceptance_criteria":"- Checkboxes appear per mapped field in import settings\\n- Unchecked fields are not written for existing posts\\n- All fields are written for newly created posts\\n- Field lock state saved in template if using templates\\n- Clear UI indicating which fields are locked vs unlocked","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-26T12:36:38.6518916-05:00","updated_at":"2026-02-26T12:36:38.6518916-05:00","labels":["precision","tier-2"],"dependencies":[{"issue_id":"QRY-lax","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:36:38.6539954-05:00","created_by":"daemon"}]}
{"id":"QRY-lh5","title":"Site Scanner: Layer 1 - Structural discovery (post types, taxonomies, statuses)","description":"New class-site-scanner.php that discovers: all registered post types (public + private) via get_post_types(), all taxonomies via get_taxonomies(), post type to taxonomy mapping via get_object_taxonomies(), all post statuses via get_post_stati(), detected plugins (ACF, Yoast, WooCommerce). Runs on wp_loaded hook. Results stored as transient with 6-hour TTL. Includes manual rescan trigger.","acceptance_criteria":"Scanner returns complete structured array of all post types, taxonomies, statuses, and detected plugins. Results are cached. Rescan clears cache and re-runs.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-26T11:58:00.9193733-05:00","updated_at":"2026-02-26T12:07:51.2626787-05:00","closed_at":"2026-02-26T12:07:51.2626787-05:00","close_reason":"Complete. class-site-scanner.php with Layer 1 structural discovery.","dependencies":[{"issue_id":"QRY-lh5","depends_on_id":"QRY-55v","type":"blocks","created_at":"2026-02-26T11:58:00.9209508-05:00","created_by":"daemon"}]}
{"id":"QRY-pe8","title":"Export column reordering and header renaming","description":"Let users drag-reorder columns in the export configuration and rename CSV column headers independently of the WordPress field name. Essential for producing CSVs that conform to external system formats (Etsy import template, Google Merchant Center feed, CRM import spec). WP All Export and WebToffee both offer this. Low implementation effort, high practical value.","acceptance_criteria":"- Export field list is drag-sortable\\n- Each field has an editable \"Output column name\" text input\\n- CSV output uses custom column names and custom order\\n- Default column names match current behavior (field keys)\\n- Column config saved in export templates","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-26T12:36:52.4598312-05:00","updated_at":"2026-02-26T12:36:52.4598312-05:00","labels":["export","tier-2"],"dependencies":[{"issue_id":"QRY-pe8","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:36:52.4630315-05:00","created_by":"daemon"}]}
{"id":"QRY-pkh","title":"Import history log with per-row tracking","description":"Persistent import history showing all past import runs with timestamps, record counts, template used, and per-row status (created/updated/skipped/failed with error message). Currently import results are shown once and lost on page reload. History viewable from dashboard. Pairs with rollback (each history entry has a rollback button if snapshot exists). All major competitors offer this.","acceptance_criteria":"- Import runs stored in custom table or wp_options\\n- History page shows: date, template name, file name, row counts\\n- Click into a run to see per-row details\\n- Failed rows show error messages\\n- History auto-prunes after 90 days\\n- Rollback button on entries with snapshots","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-26T12:37:24.450427-05:00","updated_at":"2026-02-26T12:37:24.450427-05:00","labels":["import","tier-2"],"dependencies":[{"issue_id":"QRY-pkh","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:37:24.4533086-05:00","created_by":"daemon"}]}
{"id":"QRY-ybd","title":"WP-CLI support for import and export","description":"Run imports and exports via WP-CLI for developer workflows, CI pipelines, and performance (WP All Import reports ~50% speed improvement on CLI vs admin). Commands: wp quarry export --post-type=page --template=my-template, wp quarry import /path/to/file.csv --template=my-template, wp quarry scan --refresh, wp quarry templates list.","acceptance_criteria":"- wp quarry export works with post type and template options\\n- wp quarry import works with file path and template options\\n- wp quarry scan triggers site scanner\\n- wp quarry templates lists saved templates\\n- Progress shown in CLI output\\n- Exit codes reflect success/failure","status":"open","priority":3,"issue_type":"feature","created_at":"2026-02-26T12:37:18.5838878-05:00","updated_at":"2026-02-26T12:37:18.5838878-05:00","labels":["developer","tier-3"],"dependencies":[{"issue_id":"QRY-ybd","depends_on_id":"QRY-hly","type":"blocks","created_at":"2026-02-26T12:37:18.5871345-05:00","created_by":"daemon"}]}
